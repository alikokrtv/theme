{%- render 'section-spacing-collapsing' -%}

<div {% render 'section-properties' %}>
  <div class="custom-slider-section">
    <div class="custom-slider">
      {% for block in section.blocks %}
        <div class="custom-slide{% if forloop.first %} active{% endif %}" {{ block.shopify_attributes }}>
          {% if block.settings.image %}
            <img src="{{ block.settings.image | image_url: width: 1600 }}" alt="{{ block.settings.title }}">
          {% endif %}
          <div class="content">
            <h3>{{ block.settings.title }}</h3>
            <p>{{ block.settings.subtitle }}</p>
            {% if block.settings.link %}
              <a href="{{ block.settings.link }}">Learn More</a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% style %}
/* ---- Desktop / Genel ---- */
.custom-slider {
  display: flex;
  gap: 16px;
  height: clamp(240px, 28vw, 360px);
  overflow: hidden;
  width: 100%;
  flex-wrap: nowrap;
  align-items: stretch;
  box-sizing: border-box;
}

.custom-slide {
  position: relative;
  flex: 1 1 0%;
  overflow: hidden;
  cursor: pointer;
  border-radius: 8px;
  transition: flex 0.6s ease;
}

.custom-slide img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.6s ease;
  display: block;
}

.custom-slide {
  flex: 1 1 0%;
}

.custom-slide.active {
  flex: 3.2 1 0%;
}
.custom-slide.active img { transform: scale(1.02); }

.custom-slide .content {
  position: absolute;
  bottom: 16px; left: 16px; right: 16px;
  color: #fff;
  z-index: 2;
  opacity: 0;
  transition: opacity 0.4s ease;
  padding: 8px;
}
.custom-slide.active .content { opacity: 1; }

.custom-slide .content h3 {
  font-size: clamp(16px, 1.8vw, 28px);
  font-weight: 700;
  margin: 0 0 4px;
}
.custom-slide .content p {
  font-size: clamp(13px, 1.2vw, 16px);
  margin: 0 0 8px;
}
.custom-slide .content a {
  display: inline-block;
  padding: 6px 14px;
  border-radius: 4px;
  background: #000; color: #fff;
  font-size: 13px; font-weight: 600;
  text-decoration: none;
  transition: background 0.3s ease;
}
.custom-slide .content a:hover { background: #333; }

/* ---- Mobilde hiç görünmesin ---- */
@media (max-width: 768px) {
  .custom-slider-section {
    display: none;
  }
}
{% endstyle %}

<script>
  // Hover büyütme sadece desktop'ta
  document.querySelectorAll('.custom-slide').forEach(slide => {
    slide.addEventListener('mouseenter', () => {
      if (window.innerWidth > 768) {
        document.querySelectorAll('.custom-slide').forEach(s => s.classList.remove('active'));
        slide.classList.add('active');
      }
    });
  });
</script>

{% schema %}
{
  "name": "Hover Expand Slider",
  "class": "shopify-section--custom-slider",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Slide Image" },
        { "type": "text", "id": "title", "label": "Title", "default": "Slide Title" },
        { "type": "text", "id": "subtitle", "label": "Subtitle", "default": "Slide Subtitle" },
        { "type": "url", "id": "link", "label": "Link" }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [{ "name": "Hover Expand Slider", "category": "Custom" }]
}
{% endschema %}
